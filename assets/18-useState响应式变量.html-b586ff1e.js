import{_ as t}from"./plugin-vue_export-helper-c27b6911.js";import{r as e,o as p,c as o,a as n,b as s,e as c,w as l,f as i}from"./app-ee3e8713.js";const u={},r=n("blockquote",null,[n("p",null,"ä»£ç ä¹Ÿæ˜¯æœ‰åå°çš„ xswlğŸ¤£")],-1),d=n("p",null,"state å’Œ props ç±»ä¼¼ï¼Œéƒ½æ˜¯ä¸€ç§å­˜å‚¨å±æ€§çš„æ–¹å¼ï¼Œä½†æ˜¯ä¸åŒç‚¹åœ¨äº state åªå±äºå½“å‰ç»„ä»¶ï¼Œå…¶ä»–ç»„ä»¶æ— æ³•è®¿é—®ã€‚å¹¶ä¸” state æ˜¯å¯å˜çš„ï¼Œå½“å…¶å‘ç”Ÿå˜åŒ–åç»„ä»¶ä¼šè‡ªåŠ¨é‡æ–°æ¸²æŸ“ï¼Œä»¥ä½¿å˜åŒ–åœ¨é¡µé¢ä¸­å‘ˆç°ã€‚",-1),k=n("h1",{id:"state",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#state","aria-hidden":"true"},"#"),s(" state")],-1),v=n("p",null,"åœ¨ React ä¸­ï¼Œå½“ç»„ä»¶æ¸²æŸ“å®Œæ¯•åï¼Œå†ä¿®æ”¹ç»„ä»¶ä¸­çš„å˜é‡ï¼Œä¸ä¼šä½¿ç»„ä»¶é‡æ–°æ¸²æŸ“",-1),m=n("p",null,[s("è¦ä½¿å¾—ç»„ä»¶å¯ä»¥æ”¶åˆ°å˜é‡çš„å½±å“ï¼Œå¿…é¡»åœ¨å˜é‡ä¿®æ”¹åå¯¹ç»„ä»¶è¿›è¡Œé‡æ–°æ¸²æŸ“"),n("br"),s(" è¿™é‡Œæˆ‘ä»¬å°±éœ€è¦ä¸€ä¸ªç‰¹æ®Šå˜é‡ï¼Œå½“è¿™ä¸ªå˜é‡è¢«ä¿®æ”¹ä½¿ï¼Œç»„ä»¶ä¼šè‡ªåŠ¨é‡æ–°æ¸²æŸ“")],-1),b=n("p",null,"state ç›¸å½“äºä¸€ä¸ªå˜é‡ï¼Œ",-1),g=n("br",null,null,-1),_=n("br",null,null,-1),h=n("br",null,null,-1),f=i(`<h2 id="æ ‡å‡†å†™æ³•" tabindex="-1"><a class="header-anchor" href="#æ ‡å‡†å†™æ³•" aria-hidden="true">#</a> æ ‡å‡†å†™æ³•</h2><p>ä½¿ç”¨é’©å­ useState() æ¥åˆ›å»º state</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>useState<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å®ƒéœ€è¦ä¸€ä¸ªå€¼ä½œä¸ºå‚æ•°ï¼Œè¿™ä¸ªå€¼å°±æ˜¯ state çš„åˆå§‹å€¼</p><p>è¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªæ•°ç»„</p><ul><li>æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæ˜¯<mark>åˆå§‹å€¼</mark> - åˆå§‹å€¼åªç”¨æ¥æ˜¾ç¤ºæ•°æ®ï¼Œç›´æ¥ä¿®æ”¹ä¸ä¼šè§¦å‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“</li><li>æ•°ç»„ä¸­çš„ç¬¬äºŒä¸ªå…ƒç´ ï¼Œæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œé€šå¸¸ä¼šå‘½åä¸º setXxx - è¿™ä¸ªå‡½æ•°ç”¨æ¥ä¿®æ”¹ stateï¼Œè°ƒç”¨å…¶ä¿®æ”¹ state åä¼š<mark>è§¦å‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“</mark>ï¼Œå¹¶ä¸”ä½¿ç”¨å‡½æ•°ä¸­çš„å€¼ä½œä¸ºæ–°çš„ state å€¼</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">const</span> <span class="token punctuation">[</span>counter<span class="token punctuation">,</span> setCounter<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">addHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setCounter</span><span class="token punctuation">(</span>counter <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å°†counterå€¼ä¿®æ”¹ä¸º2</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;app&#39;</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>counter<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>addHandler<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">+</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç­‰ä»·äº</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// counter æ˜¯åˆå€¼</span>
<span class="token keyword">let</span> counter <span class="token operator">=</span> result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// setCounter è°ƒç”¨è¯¥å‡½æ•°ï¼Œé‡æ–°æ¸²æŸ“è§†å›¾</span>
<span class="token keyword">let</span> setCounter <span class="token operator">=</span> result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>setCounter</code> å…¶å®å°±æ˜¯ é‡æ–°è°ƒç”¨ <code>render</code> å‡½æ•°ï¼Œåˆå› ä¸º <code>diff</code> ç®—æ³•ï¼Œå¦‚æœå…ƒç´ ä¸å‘ç”Ÿæ”¹å˜ï¼Œä¸ä¼šè°ƒç”¨ render</p><h2 id="æ³¨æ„äº‹é¡¹" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„äº‹é¡¹" aria-hidden="true">#</a> æ³¨æ„äº‹é¡¹</h2><ul><li>å½“ state çš„å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œä¿®æ”¹æ—¶æ˜¯ä½¿ç”¨æ–°çš„å¯¹è±¡å»æ›¿æ¢å·²æœ‰å¯¹è±¡ã€‚<mark>ä¿®æ”¹å¯¹è±¡çš„å±æ€§ä¸ä¼šè§¦å‘ diff ç®—æ³•</mark>ï¼Œ <ul><li>ç”¨æµ…æ‹·è´ï¼Œå¯ä»¥ç”Ÿæˆæ–°å¯¹è±¡ï¼Œå†ä¿®æ”¹æ–°å¯¹è±¡çš„å±æ€§å€¼ <code>const newObj = Object.assign({}, Obj); newObj.age=18.setObj(newObj)</code></li><li><code>setuser({...user,age:19})</code> ï¼ŒåŸºç¡€å¥½çš„è¯å°±å¯ä»¥è¿™æ ·</li></ul></li><li>å½“é€šè¿‡ setState å»ä¿®æ”¹ä¸€ä¸ª state æ—¶ï¼Œå¹¶ä¸è¡¨ç¤ºä¿®æ”¹å½“å‰çš„ state<br> å®ƒä¿®æ”¹çš„æ˜¯ç»„ä»¶<mark>ä¸‹ä¸€æ¬¡æ¸²æŸ“æ—¶ state å€¼</mark><ul><li><code>const counter = 1;</code> counter æ˜¯å¸¸é‡ï¼Œä¹Ÿä¸èƒ½ä¿®æ”¹çš„</li></ul></li><li>setState()ä¼šè§¦å‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ï¼Œå®ƒæ˜¯å¼‚æ­¥çš„ã€‚ <ul><li>åœ¨å¼‚æ­¥é˜Ÿåˆ—ï¼Œç­‰å¾…ä¸»çº¿ç¨‹è®¡ç®—å®Œæˆï¼Œå†æ¸²æŸ“ã€‚æ‰€ä»¥å½“è°ƒç”¨ setState()éœ€è¦ç”¨æ—§ state çš„å€¼æ—¶ï¼Œä¸€å®šè¦æ³¨æ„æœ‰å¯èƒ½å‡ºç°è®¡ç®—é”™è¯¯çš„æƒ…å†µ</li><li>ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œå¯ä»¥é€šè¿‡ä¸º setState()ä¼ é€’å›è°ƒå‡½æ•°çš„å½¢å¼æ¥ä¿®æ”¹ state å€¼</li></ul></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">addHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// setCounter(counter + 1); // å°†counterå€¼ä¿®æ”¹ä¸º2</span>
        <span class="token function">setCounter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prevCounter</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>

            <span class="token comment">/*
            *   setState()ä¸­å›è°ƒå‡½æ•°çš„è¿”å›å€¼å°†ä¼šæˆä¸ºæ–°çš„stateå€¼
            *       å›è°ƒå‡½æ•°æ‰§è¡Œæ—¶ï¼ŒReactä¼šå°†æœ€æ–°çš„stateå€¼ä½œä¸ºå‚æ•°ä¼ é€’
            * */</span>
            <span class="token keyword">return</span> prevCounter <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// setCounter(prevState =&gt; prevState + 1);</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>setState ä¸­çš„å›è°ƒå‡½æ•°æ˜¯å¼‚æ­¥å›è°ƒï¼Œå°†ä¼šæŠŠå½“å‰åŒæ­¥å‡½æ•°æ‰§è¡Œä¸€éï¼Œå†æ‰§è¡Œå›è°ƒï¼Œå› æ­¤è·å¾—çš„æ˜¯æœ€æ–°çš„å€¼</li></ul>`,14);function x(j,w){const a=e("RouterLink");return p(),o("div",null,[r,d,k,v,m,b,n("p",null,[s("åªæ˜¯è¿™ä¸ªå˜é‡åœ¨ React ä¸­è¿›è¡Œäº†æ³¨å†Œï¼Œ"),g,s(" React ä¼šç›‘æ§è¿™ä¸ªå˜é‡çš„å˜åŒ–ï¼Œå½“ state å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè‡ªåŠ¨è§¦å‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“"),_,s(" ä½¿å¾—æˆ‘ä»¬çš„ä¿®æ”¹å¯ä»¥åœ¨é¡µé¢ä¸­å‘ˆç°å‡ºæ¥"),h,s(" åœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ "),c(a,{to:"/code/react/React18/18.a-hook%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0.html"},{default:l(()=>[s("é’©å­å‡½æ•°")]),_:1}),s(" ï¼Œè·å– state")]),f])}const y=t(u,[["render",x],["__file","18-useStateå“åº”å¼å˜é‡.html.vue"]]);export{y as default};
