import{_ as s}from"./plugin-vue_export-helper-c27b6911.js";import{o as a,c as t,d as e,a as n,b as p,f as c}from"./app-ad0845b4.js";const o={},l=n("h1",{id:"å¼‚æ­¥ç»„ä»¶",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#å¼‚æ­¥ç»„ä»¶","aria-hidden":"true"},"#"),p(" å¼‚æ­¥ç»„ä»¶")],-1),i=n("p",null,"åœ¨å¤§å‹åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦å°†åº”ç”¨åˆ†å‰²æˆå°ä¸€äº›çš„ä»£ç å— å¹¶ä¸”å‡å°‘ä¸»åŒ…çš„ä½“ç§¯",-1),u=n("p",null,"è¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨å¼‚æ­¥ç»„ä»¶",-1),d=c(`<h2 id="å¼•å…¥æ–¹å¼ä¸åŒ" tabindex="-1"><a class="header-anchor" href="#å¼•å…¥æ–¹å¼ä¸åŒ" aria-hidden="true">#</a> å¼•å…¥æ–¹å¼ä¸åŒ</h2><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineAsyncComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>

<span class="token comment">//ä¸“é—¨çš„å‡½æ•°å¼•å…¥</span>
<span class="token keyword">const</span> SyncVue <span class="token operator">=</span> <span class="token function">defineAsyncComponent</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;@/components/sync.vue&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨<code>&lt;suspense&gt;</code>æ’æ§½<br> è§ä¸‹é¢ğŸ‘‡</p><h1 id="é¡¶å±‚-await" tabindex="-1"><a class="header-anchor" href="#é¡¶å±‚-await" aria-hidden="true">#</a> é¡¶å±‚ Â <code>await</code></h1><p><code>åœ¨setupè¯­æ³•ç³–é‡Œé¢ ä½¿ç”¨æ–¹æ³•</code></p><p><code>&lt;script setup&gt;</code>Â  ä¸­å¯ä»¥ä½¿ç”¨é¡¶å±‚ Â <code>await</code>ã€‚ç»“æœä»£ç ä¼šè¢«ç¼–è¯‘æˆ Â <code>async setup()</code></p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> post <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">/api/post/1</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">r</span> <span class="token operator">=&gt;</span> r<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>çˆ¶ç»„ä»¶å¼•ç”¨å­ç»„ä»¶ é€šè¿‡ <code>defineAsyncComponent</code> åŠ è½½å¼‚æ­¥é…åˆ import å‡½æ•°æ¨¡å¼ä¾¿å¯ä»¥åˆ†åŒ…</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
import { reactive, ref, markRaw, toRaw, defineAsyncComponent } from &#39;vue&#39;

const Dialog = defineAsyncComponent(() =&gt; import(&#39;../../components/Dialog/index.vue&#39;))

//å®Œæ•´å†™æ³•

const AsyncComp = defineAsyncComponent({
  // åŠ è½½å‡½æ•°
  loader: () =&gt; import(&#39;./Foo.vue&#39;),

  // åŠ è½½å¼‚æ­¥ç»„ä»¶æ—¶ä½¿ç”¨çš„ç»„ä»¶
  loadingComponent: LoadingComponent,
  // å±•ç¤ºåŠ è½½ç»„ä»¶å‰çš„å»¶è¿Ÿæ—¶é—´ï¼Œé»˜è®¤ä¸º 200ms
  delay: 200,

  // åŠ è½½å¤±è´¥åå±•ç¤ºçš„ç»„ä»¶
  errorComponent: ErrorComponent,
  // å¦‚æœæä¾›äº†ä¸€ä¸ª timeout æ—¶é—´é™åˆ¶ï¼Œå¹¶è¶…æ—¶äº†
  // ä¹Ÿä¼šæ˜¾ç¤ºè¿™é‡Œé…ç½®çš„æŠ¥é”™ç»„ä»¶ï¼Œé»˜è®¤å€¼æ˜¯ï¼šInfinity
  timeout: 3000
})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="suspense" tabindex="-1"><a class="header-anchor" href="#suspense" aria-hidden="true">#</a> suspense</h1><p><code>&lt;suspense&gt;</code>Â  ç»„ä»¶æœ‰ä¸¤ä¸ªæ’æ§½ã€‚å®ƒä»¬éƒ½åªæ¥æ”¶ä¸€ä¸ªç›´æ¥å­èŠ‚ç‚¹ã€‚</p><ul><li><code>default</code>Â  æ’æ§½é‡Œçš„èŠ‚ç‚¹ä¼šå°½å¯èƒ½å±•ç¤ºå‡ºæ¥ã€‚å¦‚æœä¸èƒ½ï¼Œåˆ™å±•ç¤º</li><li><code>fallback</code>Â  æ’æ§½é‡Œçš„èŠ‚ç‚¹ã€‚</li></ul><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Suspense</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#default</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Dialog</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#default</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>æˆ‘åœ¨å“ªå„¿<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Dialog</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#fallback</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>loading...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Suspense</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,13);function r(k,v){return a(),t("div",null,[l,i,u,e(" [åŸç”Ÿ Ajax å°è£… axios](../code/åŸç”ŸAjaxå°è£…axios.md) "),d])}const b=s(o,[["render",r],["__file","18-å¼‚æ­¥ç»„ä»¶å’Œä»£ç åˆ†åŒ…å’Œsuspense.html.vue"]]);export{b as default};
